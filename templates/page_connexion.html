{% load static %}
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="ie=edge">
        <title>Connexion|safeSchool</title>
        <script src="{% static 'js/vue.js' %}"></script>
        <link rel="stylesheet" href="{% static 'css/bootstrap.css' %}">	

        <link href="https://fonts.googleapis.com/css?family=Charmonman|Cookie|Cormorant|Tangerine" rel="stylesheet">

        <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css" integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous">
        
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
        
        <link rel="stylesheet" href="{% static 'css/css_page_connexion/style_page_connexion.css' %}">	
    </head>
    <body>
        <section>
            <header>
                <nav>
                    <ul>
                         <li>
                            <a href="" class="btn-back" style="top: 30;">
                                <i class="fas fa-arrow-left"></i>
                            </a>
                        </li>
                        <li>
                            <a href="#">
                                <img src="{% static 'image/00SafeLogoOmbrÃ©e.png' %}" alt="" id="logo-safe">
                              </a>
                        </li>
                       

                    </ul>
                </nav>
            </header>
        </section>
        

        <div class="container-fluid ">
            <div class="connexion-form-content">

            
                <div class="form-content-left-section">
                    <div class="logo-safe">
                    </div>
                    <div class="text-container">
                        <h3> POURQUOI SENRREGISTRER</h3>
                        <h4>
                            <ul>
                                <li>Lorem ipsum dolor, sit amet consectetur adipisicing elit</li>
                                <li>Lorem ipsum dolor, sit amet consectetur adipisicing elit</li>
                                <li>Lorem ipsum dolor, sit amet consectetur adipisicing elit</li>
                                <li>Lorem ipsum dolor, sit amet consectetur adipisicing elit</li>
                                <li>Lorem ipsum dolor, sit amet consectetur adipisicing elit</li>
                            </ul>
                        </h4>
                    </div>
                    <div class="decollage-safe">

                    </div>
                </div>
                <div class=" form-content-right-section">
                    <div class="header">
                        <h4>
                            creer un compte
                        </h4>
                    </div>
                    <div class="sign-in-link">
                        <div>
                            <a href="#" tabindex="-1">Sign In</a>
                        <span>interresser?</span>
                            
                        </div>
                    </div>
                    <div class="notification">

                    </div>
                
                    <form action="" id="form-sign-up">
                        <div class="form-group has-feedback has success">
                            <label for="email">Email address:</label>
                            <input type="email" class="form-control" id="form-email">
                            <span class="error-form" id="email-erro-input"></span>
                            <i class="fas fa-exclamation-triangle error-font"></i>
                        </div>
                        <div class="form-group">
                            <label for="pwd">Username:</label>
                            <input type="text" class="form-control" id="form-username">
                            <i class="fas fa-exclamation-triangle  error-font" id = "check-right-icon" ></i>
                            <span class="error-form" id="username-erro-input"></span>
                        </div>
                        <div class="form-group">
                            <label for="ppwd">Password:</label>
                            <input type="password" class="form-control" id="form-pwd">
                            <i class="fas fa-exclamation-triangle  error-font" id = "" ></i>
                            <span class="error-form" id="pswd-erro-input"></span>
                            <div id="pswd_info">
                                <h4>Password must meet the following requirements:</h4>
                                <div class="progress" style="height: 5px;">
                                    <div class="progress-bar  " role="progressbar"  aria-valuenow="30" aria-valuemin="0" aria-valuemax="100" id="bare-info-pswd"></div>
                                </div>
                                 
                                <ul>
                                    <li id="letter" class="invalid">At least <strong>one letter</strong></li>
                                    <li id="capital" class="invalid">At least <strong>one capital letter</strong></li>
                                    <li id="number" class="invalid">At least <strong>one number</strong></li>
                                    <li id="length" class="invalid">Be at least <strong>8 characters</strong></li>
                                </ul>
                            </div>
                            
                        </div>
                        <div class="form-group">
                            <label for="repwd">ConfirmPassword:</label>
                            <input type="password" class="form-control" id="form-retypepwd">
                            <i class="fas fa-check form-control-feedback error-font" id = "" ></i>
                            <span class="error-form" id="retypepwd-erro-input"></span>
                        </div>
                        <div class="checkbox">
                            <label><input type="checkbox"> Remember me</label>
                        </div>
                        <div class="form-group">
                            <button type="submit" id="sigu_up_btn" class="btn buton-connexion">creat acount</button>
                        </div>
                    </form>
                    <div class="awasome-divided-div">
                        <div class="awasom-divider" data-label="or" >

                        </div>
                    </div>
                    <a href="/google/oauth2?signup=1" class="connex-btn connex-btn-secondary google-sign-up" tabindex="5">
                        <div class="google-logo">
                        <img src="https://static.getpostman.com/assets/google-logo.png" width="16px" height="16px">
                        </div>
                        <div class="google-text">
                        <div>Sign up with Google</div>
                        </div>
                    </a>
                    <p class="terms-link">
                        By signing up, you agree to the 
                        <a href="https://app.getpostman.com/licenses/postman_base_app" target="_blank" tabindex="-1">Terms of Use</a>.
                    </p>
                    
                </div>
            </div>
        </div>

       <script src="{% static 'js/bootstrap.js' %}"></script>
       <script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.5.20/vue.js"></script>
       <script src="{% static 'js/jquery-3.2.1.slim.min.js' %}"></script>
       <script src="{% static 'js/validation_formulaire_Js/validation_FormConex.js' %}"></script>
       <script type="text/javascript">
        $(function(){
            $("#email-erro-input").hide();
            $("#username-erro-input").hide();
            $("#pswd-erro-input").hide();
            $("#retypepwd-erro-input").hide();
            $(".error-font").hide();
            
            

            var error_email = false;
            var error_username = false;
            var error_pwd = false;
            var error_retypepwd = false;

            $("#form-email").focusout(function(){
                check_email();
            });

            $("#form-username").focusout(function(){
                check_form_username();
            });


           $("#form-pwd").keyup(function() {
                var pswd = $(this).val();
                //validate the length
                if ( pswd.length < 8 ) {
                    
                    $('#bare-info-pswd').addClass('color-progress');
                    $('#length').removeClass('valid').addClass('invalid');
                    
                } else {
                    $('#length').removeClass('invalid').addClass('valid');
                    $('#bare-info-pswd').removeClass('color-progress').addClass('color-progress-orange');
                }

                if ( pswd.match(/[A-z]/) ) {
                    $('#letter').removeClass('invalid').addClass('valid');
                } else {
                    $('#letter').removeClass('valid').addClass('invalid');
                }

        //validate capital letter
                if ( pswd.match(/[A-Z]/) ) {
                    $('#capital').removeClass('invalid').addClass('valid');
                } else {
                     $('#capital').removeClass('valid').addClass('invalid');
                }

        //validate number
                if ( pswd.match(/\d/) ) {
                    $('#number').removeClass('invalid').addClass('valid');
                } else {
                        $('#number').removeClass('valid').addClass('invalid');
                }

                //progress barre

                if ( pswd.length >= 8 && pswd.match(/[A-z]/)&&  pswd.match(/[A-Z]/) && pswd.match(/\d/) ){
                    $('#bare-info-pswd').removeClass('color-progress-orange').addClass('color-progress-vert');
                }

                else if ( pswd.length >= 6 && pswd.length < 8){
                    $('#bare-info-pswd').removeClass('color-progress-vert').addClass(' color-progress-orange');
                }  

                 else if( pswd.length <= 4 ){
                    $('#bare-info-pswd').removeClass(' color-progress-orange').addClass('color-progress');
                }

                 else if( pswd.length <= 1 ){
                    $('#bare-info-pswd').removeClass('color-progress');
                }

               

                    
                
                


                // keyup code here
                });
                $("#form-pwd") .focus(function() {
                $('#pswd_info').show();

            
            
            $("#form-pwd").blur(function() {
                $('#pswd_info').hide();
                check_form_pwd();
            });



            /*$("#form-pwd").keyup(function(){
                
                check_form_pwds();
            });

            $("#form-pwd").focusout(function(){
                check_form_pwd();
            });*/

            /*$("#form-pwd").focusout(function(){
                check_form_pwd();
                ('#pswd_info').show();
                
            });*/

             $("#form-retypepwd").focusout(function(){
                check_form_retypepwd();
            });

})

            function check_form_username(){
                var pattern = /^[a-zA-Z]*$/;
                var fusername = $("#form-username").val();
                if (pattern.test(fusername) && fusername !== '')  {
                    $("#username-erro-input").hide();
                    $("#form-username").css("border","1px solid green");
                    $("#form-username ~ .error-font").removeClass('fa-exclamation-triangle').addClass('fa-check');
                    $("#form-username ~ .error-font").show();
                    //$("#check-right-icon").hide();
                    
                } 
                else if (fusername === '')  {
                    $("#username-erro-input").html("ce champ ne doit pas etre vide");
                    $("#username-erro-input").show();
                    $("#form-username").css("border","1px solid #f90A0A"); 
                    $("#form-username ~ .error-font").removeClass(' fa-check').addClass('fa-exclamation-triangle');
                    $("#form-username ~ .error-font").show();
                    
                    error_username = true;
                }
                else {
                    $("#username-erro-input").html("ne dois contenir que des caractres");
                    $("#username-erro-input").show();
                    $("#form-username").css("border","1px solid #f90A0A"); 
                    $("#form-username ~ .error-font").removeClass('fa-check').addClass('fa-exclamation-triangle');
                    $("#form-username ~ .error-font").show();
                   
                    error_username = true;                   
                }
            }


            // mot de passe function

            function check_form_pwd(){
                
                var pattern = /^[a-zA-Z]*$/;
                var password = $("#form-pwd").val();
                password = $.trim(password);
                var lettre_min = /[a-z]/;
                var lettre_maj =/[A-Z]/;
                var nombre = /[0-9]/;
                var password_length = $("#form-pwd").val().length;
                if(password === ''){
                    $("#pswd-erro-input").html("ce champ ne doit pas etre vide"); 
                    $("#pswd-erro-input").show();
                    $("#form-pwd").css("border","1px solid #f90A0A");
                    $("#form-pwd ~ .error-font").removeClass('fa-check').addClass(' fa-exclamation-triangle');
                    $("#form-pwd ~ .error-font").show();
                    
                   
                } 
                else if(password_length <4){
                    $("#pswd-erro-input").html("mot de passe faible"); 
                    $("#pswd-erro-input").show();
                    $("#form-pwd").css("border","1px solid #f90A0A");
                    $("#form-pwd ~ .error-font").removeClass('fa-check').addClass(' fa-exclamation-triangle');
                    $("#form-pwd ~ .error-font").show();
                   
                }
                else if(password_length >=6 &&password_length < 8 && password.match(lettre_maj) && password.match(nombre)){
                    $("#pswd-erro-input").html("mot de passe moyen"); 
                    $("#pswd-erro-input").show();
                    $("#form-pwd").css("border","1px solid #663E10"); 
                    $("#form-pwd ~ .error-font").removeClass('fa-check').addClass(' fa-exclamation-triangle');
                    $("#form-pwd ~ .error-font").show();
                }

                 else if(password_length >=6 &&password_length < 8 && password.match(lettre_maj) && password.match(lettre_min)){
                    $("#pswd-erro-input").html("mot de passe moyen"); 
                    $("#pswd-erro-input").show();
                    $("#form-pwd").css("border","1px solid #A2B5BF");
                    $("#form-pwd ~ .error-font").removeClass('fa-check').addClass(' fa-exclamation-triangle');
                    $("#form-pwd ~ .error-font").show();
                }

                else if(password_length >=6 &&password_length < 8 && password.match(nombre) && password.match(lettre_min)){
                    $("#pswd-erro-input").html("mot de passe moyen"); 
                    $("#pswd-erro-input").show();
                    $("#form-pwd").css("border","1px solid #B0CC99"); 
                    $("#form-pwd ~ .error-font").removeClass('fa-check').addClass(' fa-exclamation-triangle');
                    $("#form-pwd ~ .error-font").show();
                }

                else if(password_length >=8 && password.match(nombre) && password.match(lettre_min) && password.match(lettre_maj) ){
                   /* $("#pswd-erro-input").html("super");*/ 
                    $("#pswd-erro-input").hide();
                    $("#form-pwd~ .error-font").removeClass('fa-exclamation-triangle').addClass('fa-check');
                    $("#form-pwd ~ .error-font").show();
                    $("#form-pwd").css("border","1px solid green"); 
                }
                else{
                    $("#pswd-erro-input").html("mot de PASSE INCORRECT"); 
                    $("#pswd-erro-input").show();
                    $("#pswd-erro-input ~ .error-font").removeClass('fa-check').addClass('fa-exclamation-triangle');
                    $("#pswd-erro-input ~ .error-font").show();
                    $("#form-pwd").css("border","1px solid #f90A0A"); 
                    $("#form-pwd ~ .error-font").removeClass('fa-check').addClass(' fa-exclamation-triangle');
                    $("#form-pwd ~ .error-font").show();
                }  
   
            } 

            function check_form_retypepwd(){
                var password = $("#form-pwd").val();
                password = $.trim(password);
                var retype_password = $("#form-retypepwd").val();
                retype_password = $.trim(retype_password);
                if (retype_password !== password) {
                    $("#retypepwd-erro-input").html("Mot de passe incorrect");
                    $("#retypepwd-erro-input").show();
                    $("#form-retypepwd").css("border","1px solid #f90A0A"); 
                    $("#form-retypepwd ~ .error-font").removeClass(' fa-check').addClass('fa-exclamation-triangle');
                    $("#form-retypepwd ~ .error-font").show();
                    error_retypepwd = true;    
                    
                } else if(retype_password === '') {
                    $("#retypepwd-erro-input").html("Ce champ ne peut pas etre vide");
                    $("#retypepwd-erro-input").show();
                    $("#form-retypepwd").css("border","1px solid #f90A0A");
                    $("#form-retypepwd ~ .error-font").removeClass(' fa-check').addClass('fa-exclamation-triangle');
                    $("#form-retypepwd ~ .error-font").show();
                    error_retypepwd = true;    
                   
                }else{
                    $("#form-retypepwd ~ .error-font").removeClass('fa-exclamation-triangle').addClass('fa-check');
                    $("#form-retypepwd ~ .error-font").show();
                    $("#retypepwd-erro-input").hide();
                    $("#form-retypepwd").css("border","1px solid green");
                }
            } 


            function check_email(){
                var pattern = /^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;
                var email = $("#form-email").val();
                if(pattern.test(email) && email !== '' ){
                    $("#form-email ~ .error-font").removeClass('fa-exclamation-triangle').addClass('fa-check');
                    $("#form-email ~ .error-font").show();
                    $("#email-erro-input").hide();
                    $("#form-email").css("border","1px solid green");
                }else if (email === ''){
                    $("#email-erro-input").html("Ce champ ne doit pas etre vide");
                    $("#email-erro-input").show();
                    $("#form-email").css("border","1px solid #f90A0A");
                    $("#form-email ~ .error-font").removeClass(' fa-check').addClass('fa-exclamation-triangle');
                    $("#fform-email ~ .error-font").show();
                    error_retypepwd = true;
                }else{
                    $("#email-erro-input").html("email incorrect");
                    $("#email-erro-input").show();
                    $("#form-email").css("border","1px solid #f90A0A");
                    $("#form-email ~ .error-font").removeClass(' fa-check').addClass('fa-exclamation-triangle');
                    $("#fform-email ~ .error-font").show();
                    error_retypepwd = true;
                } 

            }

             
           $("#sigu_up_btn").submit(function(){
                error_email = false;
                error_username = false;
                error_pwd = false;
                error_retypepwd = false;

                check_email();
                check_form_retypepwd();
                check_form_pwd();
                check_form_username();

                if (error_email === false && error_username === false && error_pwd === false && error_pwd === false ) {
                     alert("Enregistrement effectue avec succes ");
                     return true;
                } else {
                    alert("Reesaiyer ");
                    return false;
                    
                }



           });

        })

       </script>

    </body>
</html>